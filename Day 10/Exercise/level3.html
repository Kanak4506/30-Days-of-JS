<html>

<head>
    <title>Day 10 Level 3</title>
</head>

<body>
    <script type="module">
        import { countries } from './countries.js'
        // q1
        let uniquesetCountries = new Set();
        for (const country of countries) {
            for (const lang of country.languages) {
                uniquesetCountries.add(lang);
            }
        }
        console.log(`There are ${uniquesetCountries.size} languages in the countries object file.`);

        // q2

       
       function mostSpokenLang(countries, top) {
            const allLang = new Set();

            countries.forEach((country) => 
        {
            country.languages.forEach(language => {
                allLang.add(language);
            });
        });

        const langcount = new Map();
            allLang.forEach(language => {
                let count = 0;
                countries.forEach(country => {
                    if(country.languages.includes(language)){
                        count++;
                    }
                });
                langcount.set(language, count);
            });
console.log(langcount)
            const sortedLang = [...langcount.entries()].sort((a,b) => b[1] - a[1]);

            return sortedLang.slice(0, top ).map(([language, count]) =>({[language]: count }));
       }
       
       console.log(mostSpokenLang(countries, 10))
       
       
   
    </script>
</body>

</html>